<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Learning Analytics System</title>
    
    <!-- Base Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/learning-analytics.css">
    
    <style>
        body {
            font-family: 'Rubik', Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
        }
        
        .test-section h2 {
            color: #666;
            border-bottom: 2px solid #daa520;
            padding-bottom: 10px;
        }
        
        .test-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .test-btn {
            padding: 10px 20px;
            background: #daa520;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .test-btn:hover {
            background: #b8941b;
        }
        
        .test-btn.success {
            background: #28a745;
        }
        
        .test-btn.info {
            background: #17a2b8;
        }
        
        .test-btn.warning {
            background: #ffc107;
            color: #212529;
        }
        
        .analytics-demo {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #daa520;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        
        .fake-sections {
            margin-top: 30px;
        }
        
        .fake-section {
            height: 400px;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }
        
        .fake-section:nth-child(1) { background: linear-gradient(135deg, #8b7d3a, #a69154); }
        .fake-section:nth-child(2) { background: linear-gradient(135deg, #6b8e23, #7a9f2e); }
        .fake-section:nth-child(3) { background: linear-gradient(135deg, #daa520, #e6b82a); }
        .fake-section:nth-child(4) { background: linear-gradient(135deg, #4682b4, #5a96c7); }
        .fake-section:nth-child(5) { background: linear-gradient(135deg, #cd853f, #d89c5a); }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ ×‘×“×™×§×ª ××¢×¨×›×ª ×× ×œ×™×˜×™×§×ª ×œ××™×“×”</h1>
        
        <!-- Analytics Controls -->
        <div class="test-section">
            <h2>1. ×‘×§×¨×ª ×× ×œ×™×˜×™×§×”</h2>
            <p>×‘×“×•×§ ××ª ×”×¤×•× ×§×¦×™×•×ª ×”×‘×¡×™×¡×™×•×ª ×©×œ ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×”</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="testAnalyticsInit()">
                    ğŸš€ ××ª×—×œ ×× ×œ×™×˜×™×§×”
                </button>
                <button class="test-btn success" onclick="testShowAnalytics()">
                    ğŸ“Š ×”×¦×’ ×¤×× ×œ ×× ×œ×™×˜×™×§×”
                </button>
                <button class="test-btn info" onclick="testRecordInteraction()">
                    ğŸ‘† ×¨×©×•× ××™× ×˜×¨××§×¦×™×”
                </button>
                <button class="test-btn warning" onclick="testAwardAchievement()">
                    ğŸ† ×”×¢× ×™×§ ×”×™×©×’
                </button>
            </div>
        </div>
        
        <!-- Section Tracking -->
        <div class="test-section">
            <h2>2. ××¢×§×‘ ×—×œ×§×™×</h2>
            <p>×‘×“×•×§ ××¢×§×‘ ×”×‘×™×§×•×¨×™× ×‘×—×œ×§×™× ×”×©×•× ×™× ×©×œ ×”××ª×¨</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="simulateSectionVisit('biblical-text')">
                    ğŸ“– ×‘×™×§×•×¨ ×‘×˜×§×¡×˜ ×”××§×¨××™
                </button>
                <button class="test-btn" onclick="simulateSectionVisit('analysis')">
                    ğŸ” ×‘×™×§×•×¨ ×‘×× ×œ×™×–×”
                </button>
                <button class="test-btn" onclick="simulateSectionVisit('infographics')">
                    ğŸ“ˆ ×‘×™×§×•×¨ ×‘×ª×¨×©×™××™×
                </button>
                <button class="test-btn" onclick="simulateSectionVisit('commentary')">
                    ğŸ“š ×‘×™×§×•×¨ ×‘×¤×¨×©× ×•×ª
                </button>
            </div>
        </div>
        
        <!-- Quiz Integration -->
        <div class="test-section">
            <h2>3. ××™× ×˜×’×¨×¦×™×” ×¢× ×—×™×“×•×Ÿ</h2>
            <p>×‘×“×•×§ ××ª ×”××™× ×˜×’×¨×¦×™×” ×¢× ××¢×¨×›×ª ×”×—×™×“×•× ×™×</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="simulateQuizStart()">
                    ğŸ® ×”×ª×—×œ ×—×™×“×•×Ÿ ××“×•××”
                </button>
                <button class="test-btn success" onclick="simulateQuizComplete(85)">
                    âœ… ×¡×™×™× ×—×™×“×•×Ÿ (85%)
                </button>
                <button class="test-btn warning" onclick="simulateQuizComplete(45)">
                    âš ï¸ ×¡×™×™× ×—×™×“×•×Ÿ (45%)
                </button>
            </div>
        </div>
        
        <!-- Time Tracking -->
        <div class="test-section">
            <h2>4. ××¢×§×‘ ×–××Ÿ</h2>
            <p>×‘×“×•×§ ××ª ××¢×¨×›×ª ××¢×§×‘ ×”×–××Ÿ</p>
            <div class="test-buttons">
                <button class="test-btn" onclick="addTimeSpent('commentary', 300)">
                    â±ï¸ ×”×•×¡×£ ×–××Ÿ ×¤×¨×©× ×•×ª (5 ×“×§')
                </button>
                <button class="test-btn" onclick="addTimeSpent('infographics', 180)">
                    ğŸ“Š ×”×•×¡×£ ×–××Ÿ ×ª×¨×©×™××™× (3 ×“×§')
                </button>
                <button class="test-btn info" onclick="showTimeBreakdown()">
                    ğŸ“ˆ ×”×¦×’ ×¤×™×¨×•×˜ ×–×× ×™×
                </button>
            </div>
        </div>
        
        <!-- Data Management -->
        <div class="test-section">
            <h2>5. × ×™×”×•×œ × ×ª×•× ×™×</h2>
            <p>×‘×“×•×§ ×¤×•× ×§×¦×™×•×ª × ×™×”×•×œ ×”× ×ª×•× ×™×</p>
            <div class="test-buttons">
                <button class="test-btn info" onclick="exportAnalyticsData()">
                    ğŸ“¤ ×™×™×¦× × ×ª×•× ×™×
                </button>
                <button class="test-btn warning" onclick="showAnalyticsData()">
                    ğŸ” ×”×¦×’ × ×ª×•× ×™× ×’×•×œ××™×™×
                </button>
                <button class="test-btn" style="background: #dc3545;" onclick="resetAnalyticsData()">
                    ğŸ—‘ï¸ ××¤×¡ × ×ª×•× ×™×
                </button>
            </div>
        </div>
    </div>
    
    <!-- Fake sections for scroll tracking -->
    <div class="fake-sections">
        <div class="fake-section" id="biblical-text">
            ×§×˜×¢ ×˜×§×¡×˜ ××§×¨××™ ××“×•××”
        </div>
        <div class="fake-section" id="analysis">
            ×§×˜×¢ ×× ×œ×™×–×” ××“×•××”
        </div>
        <div class="fake-section" id="infographics">
            ×§×˜×¢ ×ª×¨×©×™××™× ××“×•××”
        </div>
        <div class="fake-section" id="commentary">
            ×§×˜×¢ ×¤×¨×©× ×•×ª ××“×•××”
        </div>
        <div class="fake-section" id="education">
            ×§×˜×¢ ×—×™× ×•×š ××“×•××”
        </div>
    </div>
    
    <div class="analytics-demo">
        ğŸ“Š ××¢×¨×›×ª ×× ×œ×™×˜×™×§×” ×¤×¢×™×œ×”
    </div>
    
    <!-- JavaScript -->
    <script src="js/learning-analytics.js"></script>
    <script>
        let testAnalytics = null;
        
        // Test Functions
        function testAnalyticsInit() {
            console.log('ğŸ§ª ×‘×“×™×§×ª ××ª×—×•×œ ×× ×œ×™×˜×™×§×”...');
            if (window.YotamLearningAnalytics) {
                testAnalytics = new YotamLearningAnalytics();
                alert('âœ… ××¢×¨×›×ª ×× ×œ×™×˜×™×§×” ××•×ª×—×œ×” ×‘×”×¦×œ×—×”!');
            } else {
                alert('âŒ ××¢×¨×›×ª ×× ×œ×™×˜×™×§×” ×œ× × ××¦××”');
            }
        }
        
        function testShowAnalytics() {
            if (window.yotamAnalytics) {
                window.yotamAnalytics.toggleAnalyticsPanel();
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function testRecordInteraction() {
            if (window.yotamAnalytics) {
                window.yotamAnalytics.recordInteraction('test_interaction', {
                    type: 'manual_test',
                    value: Math.random()
                });
                alert('âœ… ××™× ×˜×¨××§×¦×™×” × ×¨×©××”');
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function testAwardAchievement() {
            if (window.yotamAnalytics) {
                const achievement = {
                    id: 'test_achievement',
                    name: '×”×™×©×’ ×‘×“×™×§×”',
                    description: '×”×™×©×’ ×©×”×•×¢× ×§ ×‘××”×œ×š ×‘×“×™×§×ª ×”××¢×¨×›×ª',
                    icon: 'ğŸ§ª'
                };
                window.yotamAnalytics.awardAchievement(achievement);
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function simulateSectionVisit(sectionId) {
            if (window.yotamAnalytics) {
                window.yotamAnalytics.recordSectionVisit(sectionId);
                alert(`âœ… ×‘×™×§×•×¨ ×‘-${sectionId} × ×¨×©×`);
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function simulateQuizStart() {
            document.dispatchEvent(new CustomEvent('quiz-started', {
                detail: {
                    totalQuestions: 10,
                    timestamp: Date.now()
                }
            }));
            alert('âœ… ×”×ª×—×œ×ª ×—×™×“×•×Ÿ × ×¨×©××”');
        }
        
        function simulateQuizComplete(score) {
            document.dispatchEvent(new CustomEvent('quiz-completed', {
                detail: {
                    score: Math.round(score * 10 / 100),
                    totalQuestions: 10,
                    percentage: score,
                    timestamp: Date.now()
                }
            }));
            alert(`âœ… ×¡×™×•× ×—×™×“×•×Ÿ × ×¨×©× (${score}%)`);
        }
        
        function addTimeSpent(section, seconds) {
            if (window.yotamAnalytics) {
                if (!window.yotamAnalytics.sessionData.timeSpent[section]) {
                    window.yotamAnalytics.sessionData.timeSpent[section] = 0;
                }
                window.yotamAnalytics.sessionData.timeSpent[section] += seconds;
                window.yotamAnalytics.saveData();
                alert(`âœ… × ×•×¡×¤×• ${seconds} ×©× ×™×•×ª ×œ-${section}`);
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function showTimeBreakdown() {
            if (window.yotamAnalytics) {
                const timeData = window.yotamAnalytics.sessionData.timeSpent;
                console.log('×¤×™×¨×•×˜ ×–×× ×™×:', timeData);
                alert('×¤×™×¨×•×˜ ×”×–×× ×™× ×”×•×“×¤×¡ ×œ×§×•× ×¡×•×œ');
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function exportAnalyticsData() {
            if (window.yotamAnalytics) {
                window.yotamAnalytics.exportData();
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function showAnalyticsData() {
            if (window.yotamAnalytics) {
                console.log('× ×ª×•× ×™ ×× ×œ×™×˜×™×§×”:', {
                    sessionData: window.yotamAnalytics.sessionData,
                    learningMetrics: window.yotamAnalytics.learningMetrics
                });
                alert('× ×ª×•× ×™ ×”×× ×œ×™×˜×™×§×” ×”×•×“×¤×¡×• ×œ×§×•× ×¡×•×œ');
            } else {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        function resetAnalyticsData() {
            if (window.yotamAnalytics && confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××¤×¡ ××ª ×›×œ ×”× ×ª×•× ×™×?')) {
                window.yotamAnalytics.resetProgress();
            } else if (!window.yotamAnalytics) {
                alert('×™×© ×œ××ª×—×œ ××ª ××¢×¨×›×ª ×”×× ×œ×™×˜×™×§×” ×ª×—×™×œ×”');
            }
        }
        
        // Auto-initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª ×¢××•×“ ×‘×“×™×§×ª ×× ×œ×™×˜×™×§×” × ×˜×¢×Ÿ');
            
            // Wait a moment for analytics to initialize
            setTimeout(() => {
                if (window.yotamAnalytics) {
                    console.log('âœ… ××¢×¨×›×ª ×× ×œ×™×˜×™×§×” ×–×•×”×ª×” ××•×˜×•××˜×™×ª');
                }
            }, 1000);
        });
    </script>
</body>
</html>
